
<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>golang_todo: Go Coverage Report</title>
		<style>
			body {
				background: black;
				color: rgb(80, 80, 80);
			}
			body, pre, #legend span {
				font-family: Menlo, monospace;
				font-weight: bold;
			}
			#topbar {
				background: black;
				position: fixed;
				top: 0; left: 0; right: 0;
				height: 42px;
				border-bottom: 1px solid rgb(80, 80, 80);
			}
			#content {
				margin-top: 50px;
			}
			#nav, #legend {
				float: left;
				margin-left: 10px;
			}
			#legend {
				margin-top: 12px;
			}
			#nav {
				margin-top: 10px;
			}
			#legend span {
				margin: 0 5px;
			}
			.cov0 { color: rgb(192, 0, 0) }
.cov1 { color: rgb(128, 128, 128) }
.cov2 { color: rgb(116, 140, 131) }
.cov3 { color: rgb(104, 152, 134) }
.cov4 { color: rgb(92, 164, 137) }
.cov5 { color: rgb(80, 176, 140) }
.cov6 { color: rgb(68, 188, 143) }
.cov7 { color: rgb(56, 200, 146) }
.cov8 { color: rgb(44, 212, 149) }
.cov9 { color: rgb(32, 224, 152) }
.cov10 { color: rgb(20, 236, 155) }

		</style>
	</head>
	<body>
		<div id="topbar">
			<div id="nav">
				<select id="files">
				
				<option value="file0">github.com/zhekagigs/golang_todo/main.go (95.8%)</option>
				
				<option value="file1">github.com/zhekagigs/golang_todo/task.go (100.0%)</option>
				
				<option value="file2">github.com/zhekagigs/golang_todo/utils.go (100.0%)</option>
				
				</select>
			</div>
			<div id="legend">
				<span>not tracked</span>
			
				<span class="cov0">not covered</span>
				<span class="cov8">covered</span>
			
			</div>
		</div>
		<div id="content">
		
		<pre class="file" id="file0" style="display: none">package main

import (
        "flag"
        "fmt"
        "os"
)

func main() <span class="cov0" title="0">{
        os.Exit(RealMain())
}</span>

func RealMain() int <span class="cov8" title="1">{
        helpFlag := flag.Bool("h", false, "Display help information")

        flag.Usage = printHelp

        flag.Parse()

        if *helpFlag </span><span class="cov8" title="1">{
                flag.Usage()
                return 0
        }</span>

        <span class="cov8" title="1">if flag.NArg() &lt; 1 </span><span class="cov8" title="1">{
                fmt.Println("Error: JSON file path is required")
                flag.Usage()
                return 1
        }</span>

        <span class="cov8" title="1">fileName := flag.Arg(0)
        fmt.Println(BeerAscii())
        fmt.Printf("\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;Microbrewery Tasks Application&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n\n")
        fmt.Printf("List of tasks:\n\n")

        savedTasks := ReadFromJson(fileName)
        PrintTasks(os.Stdout, savedTasks...)
        return 0</span>
}

func printHelp() <span class="cov8" title="1">{
        fmt.Println("Usage: microbrewery-tasks [options] &lt;json-file-path&gt;")
        fmt.Println("\nOptions:")
        flag.PrintDefaults()
        fmt.Println("\nDescription:")
        fmt.Println("  This CLI application reads a JSON file containing microbrewery tasks and displays them.")
        fmt.Println("  Provide the path to the JSON file as an argument.")
}</span>
</pre>
		
		<pre class="file" id="file1" style="display: none">package main

import (
        "encoding/json"
        "fmt"
        "io"
        "os"
        "time"
)

type TaskCategory int

const (
        Brewing TaskCategory = iota
        Marketing
        Logistics
        Quality
)

type Task struct {
        Id        int
        Task      string
        Category  TaskCategory
        Done      bool
        CreatedAt time.Time
        PlannedAt time.Time
}

func NewTask(id int, task string, category TaskCategory, plannedAt time.Time) Task <span class="cov8" title="1">{
        return Task{
                Id:        id,
                Task:      task,
                Category:  category,
                Done:      false,
                CreatedAt: timeNow().Round(0),
                PlannedAt: plannedAt.Round(0),
        }
}</span>

func (t *Task) String() string <span class="cov8" title="1">{
        categoryName := [...]string{"Brewing", "Marketing", "Logistics", "Quality"}[t.Category]

        return fmt.Sprintf("id:%d,[%s] %s, created: %s, planned: %s",
                t.Id,
                categoryName,
                t.Task,
                formatDatetime(t.CreatedAt),
                formatDatetime(t.PlannedAt))
}</span>

func PrintTasks(out io.Writer, tasks ...Task) <span class="cov8" title="1">{
        for _, task := range tasks </span><span class="cov8" title="1">{
                fmt.Fprintln(out, task.String())
        }</span>
}

func SaveToJson(fileName string, tasks ...Task) <span class="cov8" title="1">{
        data, err := json.Marshal(tasks)
        check(err)

        err = os.WriteFile(fileName, data, 0644)
        check(err)
}</span>

func ReadFromJson(fileName string) []Task <span class="cov8" title="1">{
        bytes, err := os.ReadFile(fileName)
        check(err)
        str := bytes
        var res []Task
        json.Unmarshal([]byte(str), &amp;res)
        return res
}</span>
</pre>
		
		<pre class="file" id="file2" style="display: none">package main

import (
        "fmt"
        "math/rand"
        "os"
        "strings"
        "time"
)

var timeNow = time.Now

func check(err error) <span class="cov8" title="1">{
        if err != nil </span><span class="cov8" title="1">{
                panic(err)</span>
        }
}

func formatDatetime(t time.Time) string <span class="cov8" title="1">{
        return t.Format("Monday, January 2, 2006 at 15:04")
}</span>

func generateRandomTasks(count int) []Task <span class="cov8" title="1">{
        brewingVerbs := []string{"Brew", "Ferment", "Bottle", "Label", "Clean", "Inspect", "Order", "Taste"}
        adjectives := []string{"Hoppy", "Malty", "Crisp", "Smooth", "Tangy", "Barrel-aged", "Experimental", "Funky", "Juicy", "Hazy", "Robust", "Refreshing"}
        beerTypes := []string{"IPA", "Stout", "Lager", "Wheat Beer", "Pale Ale", "Porter", "Sour", "Seasonal Batch"}
        ingredients := []string{"Hops", "Malt", "Yeast", "Fruit puree", "Spices", "Coffee beans", "Cocoa nibs", "Oak chips"}
        marketingTasks := []string{"Design new label", "Plan social media campaign", "Organize tasting event", "Create promotional video", "Update website", "Develop brand partnership", "Analyze market trends", "Conduct customer survey"}
        logisticsTasks := []string{"Schedule delivery route", "Inventory check", "Restock supplies", "Maintain delivery vehicles", "Optimize warehouse layout", "Negotiate with suppliers", "Update inventory management system", "Coordinate with distributors"}
        qualityTasks := []string{"Conduct sensory analysis", "Calibrate testing equipment", "Review quality control procedures", "Train staff on quality standards", "Perform microbiological testing", "Update quality assurance documentation", "Conduct supplier quality audit", "Implement new quality control measure"}

        tasks := make([]Task, count)
        for i := 0; i &lt; count; i++ </span><span class="cov8" title="1">{
                var taskValue string
                var category TaskCategory
                x := rand.Intn(5)
                switch x </span>{
                case 0:<span class="cov8" title="1">
                        verb := brewingVerbs[rand.Intn(len(brewingVerbs))]
                        adj := adjectives[rand.Intn(len(adjectives))]
                        noun := beerTypes[rand.Intn(len(beerTypes))]
                        taskValue = strings.Join([]string{verb, adj, noun}, " ")
                        category = Brewing</span>
                case 1:<span class="cov8" title="1">
                        verb := "Process"
                        if rand.Intn(2) == 0 </span><span class="cov8" title="1">{
                                verb = "Order"
                        }</span>
                        <span class="cov8" title="1">ingredient := ingredients[rand.Intn(len(ingredients))]
                        quantity := rand.Intn(500) + 1 // 1 to 500
                        unit := "kg"
                        if rand.Intn(2) == 0 </span><span class="cov8" title="1">{
                                unit = "lbs"
                        }</span>
                        <span class="cov8" title="1">taskValue = fmt.Sprintf("%s %d %s of %s", verb, quantity, unit, ingredient)
                        category = Brewing</span>
                case 2:<span class="cov8" title="1">
                        taskValue = marketingTasks[rand.Intn(len(marketingTasks))]
                        category = Marketing</span>
                case 3:<span class="cov8" title="1">
                        taskValue = logisticsTasks[rand.Intn(len(logisticsTasks))]
                        category = Logistics</span>
                case 4:<span class="cov8" title="1">
                        taskValue = qualityTasks[rand.Intn(len(qualityTasks))]
                        category = Quality</span>

                }
                <span class="cov8" title="1">plannedAt := time.Now().Add(time.Duration(rand.Intn(24*30)) * time.Hour)
                newTask := NewTask(i, taskValue, category, plannedAt)
                tasks[i] = newTask</span>
        }
        <span class="cov8" title="1">return tasks</span>
}

func BeerAscii() string <span class="cov8" title="1">{
        data, err := os.ReadFile("resources/beer.txt")
        check(err)
        return string(data)
}</span>
</pre>
		
		</div>
	</body>
	<script>
	(function() {
		var files = document.getElementById('files');
		var visible;
		files.addEventListener('change', onChange, false);
		function select(part) {
			if (visible)
				visible.style.display = 'none';
			visible = document.getElementById(part);
			if (!visible)
				return;
			files.value = part;
			visible.style.display = 'block';
			location.hash = part;
		}
		function onChange() {
			select(files.value);
			window.scrollTo(0, 0);
		}
		if (location.hash != "") {
			select(location.hash.substr(1));
		}
		if (!visible) {
			select("file0");
		}
	})();
	</script>
</html>
